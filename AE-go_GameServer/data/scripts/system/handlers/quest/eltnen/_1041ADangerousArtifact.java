

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>trunk/AE-go_GameServer/data/scripts/system/handlers/quest/eltnen/_1041ADangerousArtifact.java | Assembla</title>
    <link href="/stylesheets/base_app_and_alerts_packaged.css?1275401420" media="screen" rel="stylesheet" type="text/css" />
    
    
    <link href="/stylesheets/code_packaged.css?1275401420" media="screen" rel="stylesheet" type="text/css" />
    

        
        
    <script src="/javascripts/base_packaged.js?1275401419" type="text/javascript"></script>
    
    <script src="/javascripts/code_packaged.js?1275401420" type="text/javascript"></script>

    
    

    <!-- prevents swf file caching -->
    <meta http-equiv="PRAGMA" content="NO-CACHE" />
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    
          <style type="text/css">
        
        
      </style>
    
    
    <script type="text/javascript">
//<![CDATA[
if(!helpControl){var helpControl = {};}
//]]>
</script>
    <script type="text/javascript">
//<![CDATA[
helpControl._wikiID = 'nodes_show';
//]]>
</script>

    
  </head>
  <body>
    
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-2641193-1']);
    _gaq.push(['_setCustomVar',1,'Logged','true',1]);
    
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
    })();
  </script>


          <script type="text/javascript">
      if(!Breakout){var Breakout = {};}
        Breakout.space_wiki_name = "star";
      </script>
    
    <div class="hidden">
      <a href="#content">Skip to contents</a>
    </div>

    
        <div id="header-w">

      
      <div id="help-panel">
        <div id="help-content"></div>
      </div>
      

      <div id="header" class="_">
        
          <div id="logo">
            <a href="/">
              <img src="/images/blue/assembla-logo-small.gif" width="90" height="30" alt="Go to Assembla" title="Go to Assembla" />
            </a>
          </div>
        

        <div id="header-links">
          <div id="user-box">
            
  
    
      <a href="/start"><strong>My Start Page</strong></a>
      <a href="#" onclick="toogleRecentSpaces('top_links','/spaces/load_recent_spaces'); return false;"><img alt="Bg-open-help" src="/images/bg-open-help.gif?1273565409" /></a>
      <div style="display:inline">
        <div id="top_links" style="display:none">
          <img alt="Dots" src="/images/dots.gif?1273565409" />
        </div>
      </div>
      <span>|</span>
    
  
  <a href="/user/logout">Logout</a>

          </div>

          <form action="/spaces/star/search" id="search-form" method="get"><input class="main-search" id="q" name="q" onfocus="this.value == 'Search this space' ? this.value = '' : true" size="15" type="text" value="Search this space" />
</form>

          
          
            <div id="show-help">
              <a class="closed" href="#" id="lfshow_help" onclick="helpControl.showHelp(); return false;">Help</a>
              <img alt="Help" id="lfloading" src="/images/dots.gif?1273565409" style="display:none;" />
            </div>
          
          
        </div>

        <!-- clear float, the old skool way -->
        <div class="cut">&nbsp;</div>
        
          
            
            <div class="cut">&nbsp;</div>
          
        

        
          
            <h1 class="header-w clear-float">
              <span>STARLIT</span>
              <span id="space-role">Free/Public Space | Watcher</span>
            </h1>
          
        

      </div><!-- /header -->
    </div><!-- /header-w -->


    
      <div id="main-menu-w">
        <ul class='clear-float' id='main-menu'><li class=''><a href="/spaces/star/team">Team</a></li><li class=''><a href="/spaces/star/stream">Stream</a></li><li class=''><a href="/spaces/star/tickets">Tickets</a></li><li class='current'><a href="/code/star/subversion/nodes">Source/SVN</a></li><li class=''><a href="/spaces/star/wiki?id=ddewAcvXqr34kueJe5cbCb">Wiki</a></li></ul>
      </div><!-- /main-menu-w -->
    

    
      <ul class='menu-submenu'><li><a href="/code/star/subversion/nodes" class="first selected">Browse source</a></li><li><a href="/code/star/subversion/changesets" class="">Changesets</a></li><li><a href="/code/star/subversion/forks" class="">Forks</a></li><li><a href="/code/star/subversion/sites" class="">Sites</a></li><li><a href="/code/star/subversion/repo/instructions" class="">Instructions</a></li></ul><div class='cut'></div>
    

    <div id="content" >
      <script type="text/javascript">
//<![CDATA[
hideFlashNotice();
//]]>
</script>
      
      
  
  

  <div class="repository-browser">
  <h1 class="breadcrumb-path"><a href="/code/star/subversion/nodes?rev=551">root</a>/<a href="/code/star/subversion/nodes/trunk?rev=551">trunk</a>/<a href="/code/star/subversion/nodes/trunk/AE-go_GameServer?rev=551">AE-go_GameServer</a>/<a href="/code/star/subversion/nodes/trunk/AE-go_GameServer/data?rev=551">data</a>/<a href="/code/star/subversion/nodes/trunk/AE-go_GameServer/data/scripts?rev=551">scripts</a>/<a href="/code/star/subversion/nodes/trunk/AE-go_GameServer/data/scripts/system?rev=551">system</a>/<a href="/code/star/subversion/nodes/trunk/AE-go_GameServer/data/scripts/system/handlers?rev=551">handlers</a>/<a href="/code/star/subversion/nodes/trunk/AE-go_GameServer/data/scripts/system/handlers/quest?rev=551">quest</a>/<a href="/code/star/subversion/nodes/trunk/AE-go_GameServer/data/scripts/system/handlers/quest/eltnen?rev=551">eltnen</a>/<span>_1041ADangerousArtifact.java</span></h1>
  

<div class="internal-navigation node-info">
  <div class="top-right-links">

    
      <div class="icon-view">
        <div id="ibutton">
          <div id="ibtn-inner">
             <a href="/code/star/subversion/node/blob/trunk/AE-go_GameServer/data/scripts/system/handlers/quest/eltnen/_1041ADangerousArtifact.java" rel="nofollow"><em><img alt="View" src="/images/code/ico_view.png?1275381264" /> View as a web page</em></a>
          </div>
        </div>
      </div>
    

    
      
  <div class="icon-button">
    <a href="#" onclick="nobotGoto('!/code/star/subversion/nodes/trunk/AE-go_GameServer/data/scripts/system/handlers/quest/eltnen/_1041ADangerousArtifact.java?_format=raw&amp;rev=551'); return false;"><em><img alt="Download" src="/images/code/ico_download.png?1275381264" />Download</em></a>
    <span></span>
  </div>


    

    <div class="icon-view">
      <div id="ibutton">
        <div id="ibtn-inner">
          <a href="/code/star/subversion/sites/new?path=trunk%2FAE-go_GameServer%2Fdata%2Fscripts%2Fsystem%2Fhandlers%2Fquest%2Feltnen%2F_1041ADangerousArtifact.java"><em><img alt="Publish as a Web site" src="/images/code/ico_view.png?1275381264" /> Publish</em></a>
        </div>
      </div>
    </div>

    <div class="rev-log">
      <a href="/code/star/subversion/node/logs/trunk/AE-go_GameServer/data/scripts/system/handlers/quest/eltnen/_1041ADangerousArtifact.java?rev=551" rel="nofollow">Show revision log</a>    </div>

    
    <div class="cut">&nbsp;</div>
  </div>

  <table border="0" cellpadding="0" cellspacing="0">
  <tr>
    
          <th>Author:</th>
      <td><a href="/profile/jung981" tabindex="-1" target="_blank">jung981</a></td>
    
    <th>Revision:</th>
    <td>
      <strong><a href="/code/star/subversion/changesets/551">551</a></strong>
      (<span>«<a href="/code/star/subversion/nodes/trunk/AE-go_GameServer/data/scripts/system/handlers/quest/eltnen/_1041ADangerousArtifact.java?rev=550">Previous</a></span>)
    </td>
  </tr>

  <tr>
    <th>Date:</th>
    <td colspan="6">21 minutes ago (Jun 11 13:35)</td>
  </tr>

  
      <tr>
      <td colspan="6"><pre class="changeset-log">이전 커밋의 언어로 인한 문제 수정.</pre></td>
    </tr>
  </table>

<div class="cut"></div>

</div>


  
    

    

    <a href="#" onclick="$(&quot;ln-num&quot;).toggle(); return false;">Show/hide line numbers</a>

    <table class="ln-code">
      <tbody class="full-width">
        <tr>
          <th id="ln-num" style="display: none;">
            <pre><a href="#ln1" class="block" id="ln1">1</a>
<a href="#ln2" class="block" id="ln2">2</a>
<a href="#ln3" class="block" id="ln3">3</a>
<a href="#ln4" class="block" id="ln4">4</a>
<a href="#ln5" class="block" id="ln5">5</a>
<a href="#ln6" class="block" id="ln6">6</a>
<a href="#ln7" class="block" id="ln7">7</a>
<a href="#ln8" class="block" id="ln8">8</a>
<a href="#ln9" class="block" id="ln9">9</a>
<a href="#ln10" class="block" id="ln10">10</a>
<a href="#ln11" class="block" id="ln11">11</a>
<a href="#ln12" class="block" id="ln12">12</a>
<a href="#ln13" class="block" id="ln13">13</a>
<a href="#ln14" class="block" id="ln14">14</a>
<a href="#ln15" class="block" id="ln15">15</a>
<a href="#ln16" class="block" id="ln16">16</a>
<a href="#ln17" class="block" id="ln17">17</a>
<a href="#ln18" class="block" id="ln18">18</a>
<a href="#ln19" class="block" id="ln19">19</a>
<a href="#ln20" class="block" id="ln20">20</a>
<a href="#ln21" class="block" id="ln21">21</a>
<a href="#ln22" class="block" id="ln22">22</a>
<a href="#ln23" class="block" id="ln23">23</a>
<a href="#ln24" class="block" id="ln24">24</a>
<a href="#ln25" class="block" id="ln25">25</a>
<a href="#ln26" class="block" id="ln26">26</a>
<a href="#ln27" class="block" id="ln27">27</a>
<a href="#ln28" class="block" id="ln28">28</a>
<a href="#ln29" class="block" id="ln29">29</a>
<a href="#ln30" class="block" id="ln30">30</a>
<a href="#ln31" class="block" id="ln31">31</a>
<a href="#ln32" class="block" id="ln32">32</a>
<a href="#ln33" class="block" id="ln33">33</a>
<a href="#ln34" class="block" id="ln34">34</a>
<a href="#ln35" class="block" id="ln35">35</a>
<a href="#ln36" class="block" id="ln36">36</a>
<a href="#ln37" class="block" id="ln37">37</a>
<a href="#ln38" class="block" id="ln38">38</a>
<a href="#ln39" class="block" id="ln39">39</a>
<a href="#ln40" class="block" id="ln40">40</a>
<a href="#ln41" class="block" id="ln41">41</a>
<a href="#ln42" class="block" id="ln42">42</a>
<a href="#ln43" class="block" id="ln43">43</a>
<a href="#ln44" class="block" id="ln44">44</a>
<a href="#ln45" class="block" id="ln45">45</a>
<a href="#ln46" class="block" id="ln46">46</a>
<a href="#ln47" class="block" id="ln47">47</a>
<a href="#ln48" class="block" id="ln48">48</a>
<a href="#ln49" class="block" id="ln49">49</a>
<a href="#ln50" class="block" id="ln50">50</a>
<a href="#ln51" class="block" id="ln51">51</a>
<a href="#ln52" class="block" id="ln52">52</a>
<a href="#ln53" class="block" id="ln53">53</a>
<a href="#ln54" class="block" id="ln54">54</a>
<a href="#ln55" class="block" id="ln55">55</a>
<a href="#ln56" class="block" id="ln56">56</a>
<a href="#ln57" class="block" id="ln57">57</a>
<a href="#ln58" class="block" id="ln58">58</a>
<a href="#ln59" class="block" id="ln59">59</a>
<a href="#ln60" class="block" id="ln60">60</a>
<a href="#ln61" class="block" id="ln61">61</a>
<a href="#ln62" class="block" id="ln62">62</a>
<a href="#ln63" class="block" id="ln63">63</a>
<a href="#ln64" class="block" id="ln64">64</a>
<a href="#ln65" class="block" id="ln65">65</a>
<a href="#ln66" class="block" id="ln66">66</a>
<a href="#ln67" class="block" id="ln67">67</a>
<a href="#ln68" class="block" id="ln68">68</a>
<a href="#ln69" class="block" id="ln69">69</a>
<a href="#ln70" class="block" id="ln70">70</a>
<a href="#ln71" class="block" id="ln71">71</a>
<a href="#ln72" class="block" id="ln72">72</a>
<a href="#ln73" class="block" id="ln73">73</a>
<a href="#ln74" class="block" id="ln74">74</a>
<a href="#ln75" class="block" id="ln75">75</a>
<a href="#ln76" class="block" id="ln76">76</a>
<a href="#ln77" class="block" id="ln77">77</a>
<a href="#ln78" class="block" id="ln78">78</a>
<a href="#ln79" class="block" id="ln79">79</a>
<a href="#ln80" class="block" id="ln80">80</a>
<a href="#ln81" class="block" id="ln81">81</a>
<a href="#ln82" class="block" id="ln82">82</a>
<a href="#ln83" class="block" id="ln83">83</a>
<a href="#ln84" class="block" id="ln84">84</a>
<a href="#ln85" class="block" id="ln85">85</a>
<a href="#ln86" class="block" id="ln86">86</a>
<a href="#ln87" class="block" id="ln87">87</a>
<a href="#ln88" class="block" id="ln88">88</a>
<a href="#ln89" class="block" id="ln89">89</a>
<a href="#ln90" class="block" id="ln90">90</a>
<a href="#ln91" class="block" id="ln91">91</a>
<a href="#ln92" class="block" id="ln92">92</a>
<a href="#ln93" class="block" id="ln93">93</a>
<a href="#ln94" class="block" id="ln94">94</a>
<a href="#ln95" class="block" id="ln95">95</a>
<a href="#ln96" class="block" id="ln96">96</a>
<a href="#ln97" class="block" id="ln97">97</a>
<a href="#ln98" class="block" id="ln98">98</a>
<a href="#ln99" class="block" id="ln99">99</a>
<a href="#ln100" class="block" id="ln100">100</a>
<a href="#ln101" class="block" id="ln101">101</a>
<a href="#ln102" class="block" id="ln102">102</a>
<a href="#ln103" class="block" id="ln103">103</a>
<a href="#ln104" class="block" id="ln104">104</a>
<a href="#ln105" class="block" id="ln105">105</a>
<a href="#ln106" class="block" id="ln106">106</a>
<a href="#ln107" class="block" id="ln107">107</a>
<a href="#ln108" class="block" id="ln108">108</a>
<a href="#ln109" class="block" id="ln109">109</a>
<a href="#ln110" class="block" id="ln110">110</a>
<a href="#ln111" class="block" id="ln111">111</a>
<a href="#ln112" class="block" id="ln112">112</a>
<a href="#ln113" class="block" id="ln113">113</a>
<a href="#ln114" class="block" id="ln114">114</a>
<a href="#ln115" class="block" id="ln115">115</a>
<a href="#ln116" class="block" id="ln116">116</a>
<a href="#ln117" class="block" id="ln117">117</a>
<a href="#ln118" class="block" id="ln118">118</a>
<a href="#ln119" class="block" id="ln119">119</a>
<a href="#ln120" class="block" id="ln120">120</a>
<a href="#ln121" class="block" id="ln121">121</a>
<a href="#ln122" class="block" id="ln122">122</a>
<a href="#ln123" class="block" id="ln123">123</a>
<a href="#ln124" class="block" id="ln124">124</a>
<a href="#ln125" class="block" id="ln125">125</a>
<a href="#ln126" class="block" id="ln126">126</a>
<a href="#ln127" class="block" id="ln127">127</a>
<a href="#ln128" class="block" id="ln128">128</a>
<a href="#ln129" class="block" id="ln129">129</a>
<a href="#ln130" class="block" id="ln130">130</a>
<a href="#ln131" class="block" id="ln131">131</a>
<a href="#ln132" class="block" id="ln132">132</a>
<a href="#ln133" class="block" id="ln133">133</a>
<a href="#ln134" class="block" id="ln134">134</a>
<a href="#ln135" class="block" id="ln135">135</a>
<a href="#ln136" class="block" id="ln136">136</a>
<a href="#ln137" class="block" id="ln137">137</a>
<a href="#ln138" class="block" id="ln138">138</a>
<a href="#ln139" class="block" id="ln139">139</a>
<a href="#ln140" class="block" id="ln140">140</a>
<a href="#ln141" class="block" id="ln141">141</a>
<a href="#ln142" class="block" id="ln142">142</a>
<a href="#ln143" class="block" id="ln143">143</a>
<a href="#ln144" class="block" id="ln144">144</a>
<a href="#ln145" class="block" id="ln145">145</a>
<a href="#ln146" class="block" id="ln146">146</a>
<a href="#ln147" class="block" id="ln147">147</a>
<a href="#ln148" class="block" id="ln148">148</a>
<a href="#ln149" class="block" id="ln149">149</a>
<a href="#ln150" class="block" id="ln150">150</a>
<a href="#ln151" class="block" id="ln151">151</a>
<a href="#ln152" class="block" id="ln152">152</a>
<a href="#ln153" class="block" id="ln153">153</a>
<a href="#ln154" class="block" id="ln154">154</a>
<a href="#ln155" class="block" id="ln155">155</a>
<a href="#ln156" class="block" id="ln156">156</a>
<a href="#ln157" class="block" id="ln157">157</a>
<a href="#ln158" class="block" id="ln158">158</a>
<a href="#ln159" class="block" id="ln159">159</a>
<a href="#ln160" class="block" id="ln160">160</a>
<a href="#ln161" class="block" id="ln161">161</a>
<a href="#ln162" class="block" id="ln162">162</a>
<a href="#ln163" class="block" id="ln163">163</a>
<a href="#ln164" class="block" id="ln164">164</a>
<a href="#ln165" class="block" id="ln165">165</a>
<a href="#ln166" class="block" id="ln166">166</a>
<a href="#ln167" class="block" id="ln167">167</a>
<a href="#ln168" class="block" id="ln168">168</a>
<a href="#ln169" class="block" id="ln169">169</a>
<a href="#ln170" class="block" id="ln170">170</a>
<a href="#ln171" class="block" id="ln171">171</a>
<a href="#ln172" class="block" id="ln172">172</a>
<a href="#ln173" class="block" id="ln173">173</a>
<a href="#ln174" class="block" id="ln174">174</a>
<a href="#ln175" class="block" id="ln175">175</a>
<a href="#ln176" class="block" id="ln176">176</a>
<a href="#ln177" class="block" id="ln177">177</a>
<a href="#ln178" class="block" id="ln178">178</a>
<a href="#ln179" class="block" id="ln179">179</a>
<a href="#ln180" class="block" id="ln180">180</a>
<a href="#ln181" class="block" id="ln181">181</a>
<a href="#ln182" class="block" id="ln182">182</a>
<a href="#ln183" class="block" id="ln183">183</a>
<a href="#ln184" class="block" id="ln184">184</a>
<a href="#ln185" class="block" id="ln185">185</a>
<a href="#ln186" class="block" id="ln186">186</a>
<a href="#ln187" class="block" id="ln187">187</a>
<a href="#ln188" class="block" id="ln188">188</a>
<a href="#ln189" class="block" id="ln189">189</a>
<a href="#ln190" class="block" id="ln190">190</a>
<a href="#ln191" class="block" id="ln191">191</a>
<a href="#ln192" class="block" id="ln192">192</a>
<a href="#ln193" class="block" id="ln193">193</a>
<a href="#ln194" class="block" id="ln194">194</a>
<a href="#ln195" class="block" id="ln195">195</a>
<a href="#ln196" class="block" id="ln196">196</a>
<a href="#ln197" class="block" id="ln197">197</a>
<a href="#ln198" class="block" id="ln198">198</a>
<a href="#ln199" class="block" id="ln199">199</a>
<a href="#ln200" class="block" id="ln200">200</a>
<a href="#ln201" class="block" id="ln201">201</a>
<a href="#ln202" class="block" id="ln202">202</a>
<a href="#ln203" class="block" id="ln203">203</a>
<a href="#ln204" class="block" id="ln204">204</a>
<a href="#ln205" class="block" id="ln205">205</a>
<a href="#ln206" class="block" id="ln206">206</a>
<a href="#ln207" class="block" id="ln207">207</a>
<a href="#ln208" class="block" id="ln208">208</a>
<a href="#ln209" class="block" id="ln209">209</a>
<a href="#ln210" class="block" id="ln210">210</a>
<a href="#ln211" class="block" id="ln211">211</a>
<a href="#ln212" class="block" id="ln212">212</a>
<a href="#ln213" class="block" id="ln213">213</a>
<a href="#ln214" class="block" id="ln214">214</a>
<a href="#ln215" class="block" id="ln215">215</a>
<a href="#ln216" class="block" id="ln216">216</a>
<a href="#ln217" class="block" id="ln217">217</a>
<a href="#ln218" class="block" id="ln218">218</a>
<a href="#ln219" class="block" id="ln219">219</a>
<a href="#ln220" class="block" id="ln220">220</a>
<a href="#ln221" class="block" id="ln221">221</a>
<a href="#ln222" class="block" id="ln222">222</a>
<a href="#ln223" class="block" id="ln223">223</a>
<a href="#ln224" class="block" id="ln224">224</a>
<a href="#ln225" class="block" id="ln225">225</a>
<a href="#ln226" class="block" id="ln226">226</a>
<a href="#ln227" class="block" id="ln227">227</a>
<a href="#ln228" class="block" id="ln228">228</a>
<a href="#ln229" class="block" id="ln229">229</a>
<a href="#ln230" class="block" id="ln230">230</a>
<a href="#ln231" class="block" id="ln231">231</a>
<a href="#ln232" class="block" id="ln232">232</a>
<a href="#ln233" class="block" id="ln233">233</a>
<a href="#ln234" class="block" id="ln234">234</a>
<a href="#ln235" class="block" id="ln235">235</a>
<a href="#ln236" class="block" id="ln236">236</a>
<a href="#ln237" class="block" id="ln237">237</a>
<a href="#ln238" class="block" id="ln238">238</a>
<a href="#ln239" class="block" id="ln239">239</a>
<a href="#ln240" class="block" id="ln240">240</a>
<a href="#ln241" class="block" id="ln241">241</a>
<a href="#ln242" class="block" id="ln242">242</a>
<a href="#ln243" class="block" id="ln243">243</a>
<a href="#ln244" class="block" id="ln244">244</a>
<a href="#ln245" class="block" id="ln245">245</a>
<a href="#ln246" class="block" id="ln246">246</a>
<a href="#ln247" class="block" id="ln247">247</a>
<a href="#ln248" class="block" id="ln248">248</a>
<a href="#ln249" class="block" id="ln249">249</a>
<a href="#ln250" class="block" id="ln250">250</a>
<a href="#ln251" class="block" id="ln251">251</a>
<a href="#ln252" class="block" id="ln252">252</a>
<a href="#ln253" class="block" id="ln253">253</a>
<a href="#ln254" class="block" id="ln254">254</a>
<a href="#ln255" class="block" id="ln255">255</a>
<a href="#ln256" class="block" id="ln256">256</a>
<a href="#ln257" class="block" id="ln257">257</a>
<a href="#ln258" class="block" id="ln258">258</a>
<a href="#ln259" class="block" id="ln259">259</a>
<a href="#ln260" class="block" id="ln260">260</a>
<a href="#ln261" class="block" id="ln261">261</a>
<a href="#ln262" class="block" id="ln262">262</a>
<a href="#ln263" class="block" id="ln263">263</a>
<a href="#ln264" class="block" id="ln264">264</a>
<a href="#ln265" class="block" id="ln265">265</a>
<a href="#ln266" class="block" id="ln266">266</a>
<a href="#ln267" class="block" id="ln267">267</a>
<a href="#ln268" class="block" id="ln268">268</a>
<a href="#ln269" class="block" id="ln269">269</a>
<a href="#ln270" class="block" id="ln270">270</a>
<a href="#ln271" class="block" id="ln271">271</a>
<a href="#ln272" class="block" id="ln272">272</a>
<a href="#ln273" class="block" id="ln273">273</a>
<a href="#ln274" class="block" id="ln274">274</a>
<a href="#ln275" class="block" id="ln275">275</a>
<a href="#ln276" class="block" id="ln276">276</a>
<a href="#ln277" class="block" id="ln277">277</a>
<a href="#ln278" class="block" id="ln278">278</a>
<a href="#ln279" class="block" id="ln279">279</a>
<a href="#ln280" class="block" id="ln280">280</a>
<a href="#ln281" class="block" id="ln281">281</a>
<a href="#ln282" class="block" id="ln282">282</a>
<a href="#ln283" class="block" id="ln283">283</a>
<a href="#ln284" class="block" id="ln284">284</a>
<a href="#ln285" class="block" id="ln285">285</a>
<a href="#ln286" class="block" id="ln286">286</a>
<a href="#ln287" class="block" id="ln287">287</a>
<a href="#ln288" class="block" id="ln288">288</a>
<a href="#ln289" class="block" id="ln289">289</a>
<a href="#ln290" class="block" id="ln290">290</a>
<a href="#ln291" class="block" id="ln291">291</a>
<a href="#ln292" class="block" id="ln292">292</a>
<a href="#ln293" class="block" id="ln293">293</a>
<a href="#ln294" class="block" id="ln294">294</a>
<a href="#ln295" class="block" id="ln295">295</a>
<a href="#ln296" class="block" id="ln296">296</a>
<a href="#ln297" class="block" id="ln297">297</a>
<a href="#ln298" class="block" id="ln298">298</a>
<a href="#ln299" class="block" id="ln299">299</a>
<a href="#ln300" class="block" id="ln300">300</a>
<a href="#ln301" class="block" id="ln301">301</a>
<a href="#ln302" class="block" id="ln302">302</a>
<a href="#ln303" class="block" id="ln303">303</a>
<a href="#ln304" class="block" id="ln304">304</a>
<a href="#ln305" class="block" id="ln305">305</a>
<a href="#ln306" class="block" id="ln306">306</a>
<a href="#ln307" class="block" id="ln307">307</a>
<a href="#ln308" class="block" id="ln308">308</a>
<a href="#ln309" class="block" id="ln309">309</a>
<a href="#ln310" class="block" id="ln310">310</a>
<a href="#ln311" class="block" id="ln311">311</a>
<a href="#ln312" class="block" id="ln312">312</a>
<a href="#ln313" class="block" id="ln313">313</a>
<a href="#ln314" class="block" id="ln314">314</a>
<a href="#ln315" class="block" id="ln315">315</a>
<a href="#ln316" class="block" id="ln316">316</a>
<a href="#ln317" class="block" id="ln317">317</a>
<a href="#ln318" class="block" id="ln318">318</a>
<a href="#ln319" class="block" id="ln319">319</a>
<a href="#ln320" class="block" id="ln320">320</a>
<a href="#ln321" class="block" id="ln321">321</a>
<a href="#ln322" class="block" id="ln322">322</a>
<a href="#ln323" class="block" id="ln323">323</a>
<a href="#ln324" class="block" id="ln324">324</a>
<a href="#ln325" class="block" id="ln325">325</a>
<a href="#ln326" class="block" id="ln326">326</a></pre></th>
          <td><pre class="prettyprint lang-java">/*
 * This file is part of aion-unique &lt;aion-unique.org&gt;.
 *
 * aion-unique is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * aion-unique is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with aion-unique.  If not, see &lt;http://www.gnu.org/licenses/&gt;.
 */
package quest.eltnen;

import java.util.Collections;
import java.util.ArrayList;
import java.util.List;

import com.aionemu.gameserver.model.gameobjects.Item;
import com.aionemu.gameserver.model.gameobjects.VisibleObject;
import com.aionemu.gameserver.model.templates.quest.QuestItems;
import com.aionemu.gameserver.network.aion.serverpackets.SM_PLAY_MOVIE;
import com.aionemu.gameserver.network.aion.serverpackets.SM_ITEM_USAGE_ANIMATION;
import com.aionemu.gameserver.model.gameobjects.Npc;
import com.aionemu.gameserver.network.aion.serverpackets.SM_EMOTION;
import com.aionemu.gameserver.network.aion.serverpackets.SM_USE_OBJECT;
import com.aionemu.gameserver.model.gameobjects.player.Player;
import com.aionemu.gameserver.network.aion.serverpackets.SM_DIALOG_WINDOW;
import com.aionemu.gameserver.questEngine.handlers.QuestHandler;
import com.aionemu.gameserver.questEngine.model.QuestEnv;
import com.aionemu.gameserver.services.ItemService;
import com.aionemu.gameserver.questEngine.model.QuestState;
import com.aionemu.gameserver.utils.ThreadPoolManager;
import com.aionemu.gameserver.questEngine.model.QuestStatus;
import com.aionemu.gameserver.utils.PacketSendUtility;
import com.google.inject.Inject;

/**
 * @author Xitanium
 * 
 */
public class _1041ADangerousArtifact extends QuestHandler
{	
	@Inject
	ItemService itemService;
	
	private final static int	questId	= 1041;

	public _1041ADangerousArtifact()
	{
		super(questId);
	}
	
	@Override
	public void register()
	{
		qe.setNpcQuestData(203901).addOnTalkEvent(questId); //Telemachus
		qe.setNpcQuestData(204015).addOnTalkEvent(questId); //Civil Engineer
		qe.setNpcQuestData(700267).addOnTalkEvent(questId); //Secret Exit TEMPORARY FIX
		qe.setNpcQuestData(203833).addOnTalkEvent(questId); //Xenophon
		qe.setNpcQuestData(278500).addOnTalkEvent(questId); //Yuditio
		qe.setNpcQuestData(204042).addOnTalkEvent(questId); //Laigas
		qe.setNpcQuestData(700181).addOnTalkEvent(questId); //Stolen Artifact
		qe.addQuestLvlUp(questId);
	}
		
	@Override
	public boolean onLvlUpEvent(QuestEnv env)
	{
		Player player = env.getPlayer();
		QuestState qs = player.getQuestStateList().getQuestState(questId);
		if(qs == null || player.getCommonData().getLevel() &lt; 33 || qs.getStatus() != QuestStatus.LOCKED)
			return false;
		qs.setStatus(QuestStatus.START);
		updateQuestStatus(player, qs);
		return true;
	}	

	@Override
	public boolean onDialogEvent(QuestEnv env)
	{
		final Player player = env.getPlayer();
		int targetId = 0;
		if(env.getVisibleObject() instanceof Npc)
			targetId = ((Npc) env.getVisibleObject()).getNpcId();
		QuestState qs = player.getQuestStateList().getQuestState(questId);
		if(qs == null)
		return false;
		if(targetId == 203901) //Telemachus
		{
			if(qs.getStatus() == QuestStatus.START &amp;&amp; qs.getQuestVarById(0) == 0)
			{
				if(env.getDialogId() == 25)
					return sendQuestDialog(player, env.getVisibleObject().getObjectId(), 1011);
				else if(env.getDialogId() == 10000)
					{
					qs.setQuestVar(1);
               			     updateQuestStatus(player, qs);
					PacketSendUtility.sendPacket(player, new SM_DIALOG_WINDOW(env.getVisibleObject()
								.getObjectId(), 10));
							return true;
					}
				else
					return defaultQuestStartDialog(env);
			}
			
			else if(qs.getStatus() == QuestStatus.START &amp;&amp; qs.getQuestVarById(0) == 3)
			{
				if(env.getDialogId() == 25)
					return sendQuestDialog(player, env.getVisibleObject().getObjectId(), 1693);
				else if(env.getDialogId() == 10002)
				{
					qs.setQuestVar(4);	
					updateQuestStatus(player, qs);
					PacketSendUtility
						.sendPacket(player, new SM_DIALOG_WINDOW(env.getVisibleObject().getObjectId(), 10));
					return true;
				}
				else
					return defaultQuestStartDialog(env);
			}	
					
			else if(qs.getStatus() == QuestStatus.START &amp;&amp; qs.getQuestVarById(0) == 6)
			{
				if(env.getDialogId() == 25)
					return sendQuestDialog(player, env.getVisibleObject().getObjectId(), 2716);
				else if(env.getDialogId() == 10005)
				{
					qs.setQuestVar(7);
					updateQuestStatus(player, qs);
					PacketSendUtility
						.sendPacket(player, new SM_DIALOG_WINDOW(env.getVisibleObject().getObjectId(), 10));
					return true;
				}
				else
					return defaultQuestStartDialog(env);
			}	
			else if(qs.getStatus() == QuestStatus.REWARD)
				{
					return defaultQuestEndDialog(env);
				}
		}
		else if(targetId == 204015) //Civil Engineer
		{
			if(qs.getStatus() == QuestStatus.START &amp;&amp; qs.getQuestVarById(0) == 1)
			{
				if(env.getDialogId() == 25)
					return sendQuestDialog(player, env.getVisibleObject().getObjectId(), 1352);
				else if(env.getDialogId() == 10001)
				{
					qs.setQuestVar(2); 
					updateQuestStatus(player, qs);
					List&lt;Npc&gt; mobs = new ArrayList&lt;Npc&gt;();
					mobs.add((Npc) questService.addNewSpawn(210020000, player.getInstanceId(), 700267, (float) 2265.621, (float) 2357.8164, (float) 277.8047, (byte) 0, true));
					mobs.add((Npc) questService.addNewSpawn(210020000, player.getInstanceId(), 700267, (float) 1827.1799, (float) 2537.9143, (float) 267.5, (byte) 0, true));
					for(Npc mob : mobs)
					PacketSendUtility.sendMessage(player, &quot;Dirigez-vous aux choix : Sortie secrete ou Passage oublie&quot;);
					PacketSendUtility
						.sendPacket(player, new SM_DIALOG_WINDOW(env.getVisibleObject().getObjectId(), 10));
					return true;
				}
				else
					return defaultQuestStartDialog(env);
					
			}		

		}
		
		else if(targetId == 203833) //Xenophon
		{
			if(qs.getStatus() == QuestStatus.START &amp;&amp; qs.getQuestVarById(0) == 4)
			{
				if(env.getDialogId() == 25)
					return sendQuestDialog(player, env.getVisibleObject().getObjectId(), 2034);
				else if(env.getDialogId() == 10003)
				{
					qs.setQuestVar(5); 
					updateQuestStatus(player, qs);
					PacketSendUtility
						.sendPacket(player, new SM_DIALOG_WINDOW(env.getVisibleObject().getObjectId(), 10));
					return true;
				}
				else
					return defaultQuestStartDialog(env);
					
			}
		}
		
		else if(targetId == 278500) //Yuditio
		{
			if(qs.getStatus() == QuestStatus.START &amp;&amp; qs.getQuestVarById(0) == 5)
			{
				if(env.getDialogId() == 25)
					return sendQuestDialog(player, env.getVisibleObject().getObjectId(), 2375);
				else if(env.getDialogId() == 10004)
				{
					qs.setQuestVar(6); 
					updateQuestStatus(player, qs);
					PacketSendUtility
						.sendPacket(player, new SM_DIALOG_WINDOW(env.getVisibleObject().getObjectId(), 10));
					return true;
				}
				else
					return defaultQuestStartDialog(env);
					
			}
		}
		else if(targetId == 204042) //Laigas
		{
			if(qs.getStatus() == QuestStatus.START &amp;&amp; qs.getQuestVarById(0) == 7)
			{
				if(env.getDialogId() == 25)
					return sendQuestDialog(player, env.getVisibleObject().getObjectId(), 3057);
				else if(env.getDialogId() == 10006)
				{
					qs.setQuestVar(8); 
					itemService.addItems(player, Collections.singletonList(new QuestItems(182201011, 1)));
					updateQuestStatus(player, qs);
					PacketSendUtility
						.sendPacket(player, new SM_DIALOG_WINDOW(env.getVisibleObject().getObjectId(), 10));
					PacketSendUtility.sendPacket(player, new SM_PLAY_MOVIE(0, 37));
					return true;
				}
				else
					return defaultQuestStartDialog(env);
					
			}
			
			else if(qs.getStatus() == QuestStatus.START &amp;&amp; qs.getQuestVarById(0) == 9)
			{
				if(env.getDialogId() == 25)
					return sendQuestDialog(player, env.getVisibleObject().getObjectId(), 3398);
				else if(env.getDialogId() == 10007)
				{
					qs.setStatus(QuestStatus.REWARD);
					updateQuestStatus(player, qs);
					PacketSendUtility
						.sendPacket(player, new SM_DIALOG_WINDOW(env.getVisibleObject().getObjectId(), 10));
					PacketSendUtility.sendPacket(player, new SM_PLAY_MOVIE(0, 38));
					return true;
				}
				else
					return defaultQuestStartDialog(env);
					
			}
			
		}
	
		else if (qs.getStatus() == QuestStatus.START &amp;&amp; qs.getQuestVarById(0) == 2)
		{
			switch(targetId)
			{
				case 700267: //TEMPORARY SECRET PASSAGE
				{
					if (qs.getQuestVarById(0) == 2 &amp;&amp; env.getDialogId() == -1)
					{

						final int targetObjectId = env.getVisibleObject().getObjectId();
						PacketSendUtility.sendPacket(player, new SM_USE_OBJECT(player.getObjectId(), targetObjectId, 3000,
							1));
						PacketSendUtility.broadcastPacket(player, new SM_EMOTION(player, 37, 0,
							targetObjectId), true);
						ThreadPoolManager.getInstance().schedule(new Runnable(){
						final QuestState qs = player.getQuestStateList().getQuestState(questId);
							@Override
							public void run()
							{														
								qs.setQuestVar(3);
								updateQuestStatus(player, qs);
								if(player.getTarget() == null || player.getTarget().getObjectId() != targetObjectId)
									return;
								PacketSendUtility.sendPacket(player, new SM_USE_OBJECT(player.getObjectId(),
									targetObjectId, 3000, 0));
								PacketSendUtility.broadcastPacket(player, new SM_EMOTION(player, 38, 0,
									targetObjectId), true);
							}
						}, 3000);
					}
				}

			}
		}
		
		else if (qs.getStatus() == QuestStatus.START &amp;&amp; qs.getQuestVarById(0) == 8)
		{
			switch(targetId)
			{
				case 700181: //Stolen Artifact
				{
					if (qs.getQuestVarById(0) == 8 &amp;&amp; env.getDialogId() == -1)
					{

						final int targetObjectId = env.getVisibleObject().getObjectId();
						PacketSendUtility.sendPacket(player, new SM_USE_OBJECT(player.getObjectId(), targetObjectId, 3000,
							1));
						PacketSendUtility.broadcastPacket(player, new SM_EMOTION(player, 37, 0,
							targetObjectId), true);
						ThreadPoolManager.getInstance().schedule(new Runnable(){
						final QuestState qs = player.getQuestStateList().getQuestState(questId);
							@Override
							public void run()
							{
								qs.setQuestVar(9);
								updateQuestStatus(player, qs);
								player.getInventory().removeFromBagByItemId(182201011, 1);
								if(player.getTarget() == null || player.getTarget().getObjectId() != targetObjectId)
									return;
								PacketSendUtility.sendPacket(player, new SM_USE_OBJECT(player.getObjectId(),
									targetObjectId, 3000, 0));
								PacketSendUtility.broadcastPacket(player, new SM_EMOTION(player, 38, 0,
									targetObjectId), true);
							}
						}, 3000);
					}
				}
			}
		}
				
		return false;
	}
	
}</pre></td>
        </tr>
      </tbody>
    </table>
  
</div>

<script type="text/javascript">
//<![CDATA[
if (window.location.href.split("#").length != 1) { $("ln-num").show(); }
//]]>
</script>


  <script type="text/javascript">
//<![CDATA[
prettyPrint()
//]]>
</script>



  

    </div><!-- /content -->

    
     <div id="footer-w"> <div class="tutorial-and-bookmark"> <div class="video-link" style="text-align: center;"><span id="hidden_content_popup_video_12_features" style="display: none;"></span><a href="#" onclick="new Ajax.Updater('hidden_content_popup_video_12_features', '/features/popup_video?video=12', {asynchronous:true, evalScripts:true, onComplete:function(request){RedBox.addHiddenContent('hidden_content_popup_video_12_features'); }, onLoading:function(request){RedBox.loading(); }}); return false;">Watch our tutorial video for the Source/SVN Tool</a></div> <!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style" style="margin-right:20px"> <a href="http://www.addthis.com/bookmark.php?v=250&amp;username=xa-4bb1fb7f05797876" class="addthis_button_compact">Share</a> <span class="addthis_separator">|</span> <a class="addthis_button_facebook"></a> <a class="addthis_button_myspace"></a> <a class="addthis_button_google"></a> <a class="addthis_button_twitter"></a>
</div>
<script type="text/javascript"> document.write( '<sc'+'ript src="http'+ (document.location.protocol=='https:'?'s://':'://')+ 's7.addthis.com/js/250/addthis_widget.js#username=xa-4bb1fb7f05797876"></sc'+'ript>' )
</script>
<!-- AddThis Button END -->
<div class="cut"></div> </div> <div id="footer"> <p> <a href="/">Home</a> / <a href="/portal">Workspaces</a> / <a href="http://www.assembla.com/wiki/show/c8A2BGQEWr2RUvaaeP0Qfc">Documentation</a> / <a href="http://forum.assembla.com/" target="_blank">Report bugs</a> / <a href="http://feedback.assembla.com/" target="_blank">Send us Suggestions</a> / <a href="/features/affiliate_program">Affiliate program</a> / <a href="/spaces/star/prepare_copy">Copy this space</a> </p> <p> <a href="/free_subversion_hosting">Free Subversion hosting</a> / <a href="/catalog">Get a Space</a> </p> <p id="copyr-contact"> Copyright &copy; 2006-2010 by Assembla, LLC // <b>Phone</b> 1.781.583.7541 / <b>E-mail</b>: <a href="mailto:support@assembla.com">support@assembla.com</a> </p> </div><!-- /footer -->
</div><!-- /footer-w --> 
  </body>
</html>

